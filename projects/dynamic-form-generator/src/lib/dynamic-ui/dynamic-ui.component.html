<div [formGroup]="form" class="form-container">
  <div *ngIf="formControlsData.controls.length > 0">
    <ng-container *ngFor="let control of formControlsData.controls">
      <div [ngSwitch]="control.type" class="control-container">
        <!-- String Input Field -->
        <div *ngSwitchCase="'String'">
          <lib-input-string
            [control]="control"
            [form]="form"
            class="form-control"
          ></lib-input-string>
        </div>

        <!-- Boolean Checkbox Field -->
        <div *ngSwitchCase="'Boolean'">
          <lib-input-boolen
            [control]="control"
            [form]="form"
            class="form-check-input"
          ></lib-input-boolen>
          <label
            for="{{ control.name }}"
            class="control-label"
          >{{ control.label }}</label>
        </div>

        <!-- Number Counter Field -->
        <div *ngSwitchCase="'Counter'">
          <lib-input-number
            [control]="control"
            [form]="form"
            class="form-control"
          ></lib-input-number>
        </div>

        <!-- Select Dropdown Field -->
        <div *ngSwitchCase="'select'">
          <lib-input-select
            [control]="control"
            [form]="form"
            class="form-select"
          ></lib-input-select>
        </div>

        <!-- List Field -->
        <div *ngSwitchCase="'list'" class="list-container">
          <div class="list-header">
            <h3>{{ control.label }}</h3>
            <div class="button-container">
              <button
                type="button"
                class="add-button"
                (click)="addList(control.controls, control.name, form)"
              >
                <i class="bi bi-plus-circle me-1"></i>Add List Item
              </button>
              <button
                type="button"
                class="toggle-button"
                (click)="toggleContent()"
              >
                <i
                  class="bi"
                  [ngClass]="{
                    'bi-chevron-up': isContentVisible,
                    'bi-chevron-down': !isContentVisible
                  }"
                ></i>
              </button>
            </div>
          </div>
          <div [@slideToggle]="isContentVisible ? 'collapsed' : 'expanded'">
            <div [formArrayName]="control.name">
              <div
                *ngFor="
                  let item of getFormArray(form, control.name).controls;
                  let i = index
                "
                class="list-item"
              >
                <div [formGroupName]="i">
                  <lib-dynamic-ui
                    [form]="getFormArrayAtIndex(control.name, i, form)"
                    [formControlsData]="control"
                  ></lib-dynamic-ui>
                  <button
                    type="button"
                    class="remove-button"
                    (click)="removeGroup(i, form, control.name)"
                  >
                    <i class="bi bi-trash me-2"></i>Remove
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Group Field -->
        <div *ngSwitchCase="'group'" class="group-container">
          <div [formGroupName]="control.name">
            <h3 class="group-header">{{ control.label }}</h3>
            <lib-dynamic-ui
              [form]="getFormGroup(form, control.name)"
              [formControlsData]="control"
            ></lib-dynamic-ui>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
</div>
